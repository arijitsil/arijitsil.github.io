<script src="https://js.stripe.com/v3/"></script>
<style>
  * {
    font-family: "Helvetica Neue", Helvetica;
    font-size: 15px;
    font-variant: normal;
    padding: 0;
    margin: 0;
  }

  html {
    height: 100%;
  }

  body {
    background: #fff;
    display: flex;
   
    justify-content: center;
    min-height: 100%;
  }

  form {
    width: 480px;
    margin: 20px 0;
  }

  .group {
    
    border-radius: 4px;
    margin: 20px;
  }

  label {
    position: relative;
    color: #8898aa;
    font-weight: 300;
    height: 40px;
    line-height: 40px;
    margin-left: 20px;
    display: flex;
    flex-direction: row;
  }

  .group label:not(:last-child) {
    border-bottom: 1px solid #f0f5fa;
  }

  label > span {
    width: 120px;
    text-align: right;
    margin-right: 30px;
    font-weight: bold;
  }
  .cards-img {
    width: 50%;
  }

  .field {
    background: transparent;
    font-weight: 300;
    border: 0;
    color: #31325f;
    outline: none;
    flex: 1;
    padding-right: 10px;
    padding-left: 10px;
    cursor: text;
  }

  .field::-webkit-input-placeholder {
    color: #cfd7e0;
  }

  .field::-moz-placeholder {
    color: #cfd7e0;
  }

  button {
    float: left;
    display: block;
    background: #666ee8;
    color: white;
    box-shadow: 0 7px 14px 0 rgba(49, 49, 93, 0.1),
      0 3px 6px 0 rgba(0, 0, 0, 0.08);
    border: 0;
    position: absolute;
    bottom: 5px;
    margin-top: 20px;
    font-size: 15px;
    font-weight: 400;
    width: 100%;
    left: 0;
    line-height: 38px;
    outline: none;
  }

  button:focus {
    background: #555abf;
  }

  button:active {
    background: #43458b;
  }

  .outcome {
    float: left;
    width: 100%;
    padding-top: 8px;
    min-height: 24px;
    text-align: center;
  }
 


  .success,
  .error {
    display: none;
    font-size: 13px;
  }
  .text-center {
    text-align: center;
  }

  .success.visible,
  .error.visible {
    display: inline;
  }

  .error {
    color: #e4584c;
  }

  .success {
    color: #666ee8;
  }

  .success .token {
    font-weight: 500;
    font-size: 13px;
  }
  .exp-cvc{
    display: flex;
    margin-bottom: 10px;
  }
  .cvv{
    flex:1;
    border-bottom:2px solid #2196f3;
    margin-left: 10px;
  }

  .exp{
    flex:1;
    border-bottom :2px solid #2196f3;
    
  }
  .card-number{
    border-bottom:2px solid #2196f3;
    margin-bottom: 10px;
  }
</style>
<body>
  <form action="//httpbin.org/post" method="POST">
    <input type="hidden" name="token" />
    <div class="group">
      <div class="card-number">
        <span>Card number</span>
        <div id="card-number-element" class="field"></div>
      </div>
      <div class="exp-cvc">
        <div class="exp">
          <span>Expiry date</span>
          <div id="card-expiry-element" class="field"></div>
        </div>
        <div class="cvv">
          <span>CVC</span>
          <div id="card-cvc-element" class="field"></div>
        </div>
      </div>
    </div>
    <div class="outcome">
      <div class="error"></div>
      <div class="success">
        <span class="token"></span>
      </div>
    </div>
    <button type="submit">Submit</button>

    <!-- <div class="text-center" style="margin-top: 30px" }}><img src='./assets/payments.jpeg' class="cards-img" /></div> -->
  </form>
</body>
<script>
  var stripe = Stripe(
    "pk_test_51GtsUQDFruPsLR1hx8Ev2jNJRWHmJg6fsVa1XyaLv3aflfogeWfMu5xy8rKNkF6xTDHFCPVyrWeA9RAzy9PUW22t002dvwJrE2"
  );
  var elements = stripe.elements();
  function GetURLParameter(sParam) {
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split("&");
    for (var i = 0; i < sURLVariables.length; i++) {
      var sParameterName = sURLVariables[i].split("=");
      if (sParameterName[0] == sParam) {
        return sParameterName[1];
      }
    }
  }

  var style = {
    base: {
      iconColor: "#666EE8",
      color: "#31325F",
      lineHeight: "40px",
      fontWeight: 300,
      fontFamily: "Helvetica Neue",
      fontSize: "15px",

      "::placeholder": {
        color: "#898989",
      },
    },
  };
  var email = GetURLParameter("email");
  var cardNumberElement = elements.create("cardNumber", {
    style: style,
  });
  cardNumberElement.mount("#card-number-element");

  var cardExpiryElement = elements.create("cardExpiry", {
    style: style,
  });
  cardExpiryElement.mount("#card-expiry-element");

  var cardCvcElement = elements.create("cardCvc", {
    style: style,
  });
  cardCvcElement.mount("#card-cvc-element");

  function setOutcome(result) {
    var successElement = document.querySelector(".success");
    var errorElement = document.querySelector(".error");
    successElement.classList.remove("visible");
    errorElement.classList.remove("visible");

    if (result.token) {
      // In this example, we're simply displaying the token
      console.log(JSON.stringify(result));
      window.Token.postMessage(JSON.stringify(result));

      //successElement.querySelector('.token').innerHTML = result;
      //successElement.classList.add('visible');

      // In a real integration, you'd submit the form with the token to your backend server
      //var form = document.querySelector('form');
      //form.querySelector('input[name="token"]').setAttribute('value', result.token.id);
      //form.submit();
    } else if (result.error) {
      errorElement.textContent = result.error.message;
      errorElement.classList.add("visible");
    }
  }

  cardNumberElement.on("change", function (event) {
    setOutcome(event);
  });

  cardExpiryElement.on("change", function (event) {
    setOutcome(event);
  });

  cardCvcElement.on("change", function (event) {
    setOutcome(event);
  });

  document.querySelector("form").addEventListener("submit", function (e) {
    e.preventDefault();
    var options = {
      email: email,
    };
    stripe.createToken(cardNumberElement, options).then(setOutcome);
  });
</script>
